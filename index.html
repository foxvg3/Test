import random
import time

# --- D&D ENGINE ---
def roll_d20():
    return random.randint(1, 20)

def roll_damage(dice_count, dice_sides):
    return sum(random.randint(1, dice_sides) for _ in range(dice_count))

# --- CLASSES ---
class Sorcerer:
    def __init__(self, name, technique, grade="4-–π —Ä–∞–Ω–≥"):
        self.name = name
        self.technique = technique
        self.grade = grade
        self.hp = 100
        self.cursed_energy = 50
        
        # –°—Ç–∞—Ç—ã (D&D style)
        self.stats = {
            "STR": 12,  # –§–∏–∑–∏—á–µ—Å–∫–∞—è —Å–∏–ª–∞
            "CTRL": 10, # –ö–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–æ–∫–ª—è—Ç–æ–π —ç–Ω–µ—Ä–≥–∏–∏
            "PER": 11   # –í–æ—Å–ø—Ä–∏—è—Ç–∏–µ
        }

    def attack(self, target):
        print(f"\n‚öîÔ∏è {self.name} –∞—Ç–∞–∫—É–µ—Ç –ø—Ä–æ–∫–ª—è—Ç–∏–µ '{target.name}'!")
        
        # –ë—Ä–æ—Å–æ–∫ –Ω–∞ –ø–æ–ø–∞–¥–∞–Ω–∏–µ (d20 + –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–∏–ª—ã)
        modifier = (self.stats["STR"] - 10) // 2
        roll = roll_d20()
        total_hit = roll + modifier
        
        print(f"üé≤ –ë—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–∞: {roll} + –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä: {modifier} = {total_hit}")
        
        if total_hit >= target.ac: # AC = Armor Class (–ö–ª–∞—Å—Å –±—Ä–æ–Ω–∏)
            dmg = roll_damage(1, 8) + modifier
            target.hp -= dmg
            print(f"üí• –ü–û–ü–ê–î–ê–ù–ò–ï! –ù–∞–Ω–µ—Å–µ–Ω–æ {dmg} —É—Ä–æ–Ω–∞ –ø—Ä–æ–∫–ª—è—Ç–æ–π —ç–Ω–µ—Ä–≥–∏–µ–π.")
        else:
            print("üí® –ü—Ä–æ–º–∞—Ö! –ü—Ä–æ–∫–ª—è—Ç–∏–µ —É–∫–ª–æ–Ω–∏–ª–æ—Å—å.")

class CursedSpirit:
    def __init__(self, name, grade, hp, ac):
        self.name = name
        self.grade = grade
        self.hp = hp
        self.ac = ac # –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ø–∞–¥–∞–Ω–∏—è –ø–æ –¥—É—Ö—É

# --- GAME LOOP ---
def start_game():
    print("==========================================")
    print("üåë JUJUTSU KAISEN: TEXT RPG PROTOCOL üåë")
    print("==========================================")
    
    player_name = input("–í–≤–µ–¥–∏—Ç–µ –∏–º—è —à–∞–º–∞–Ω–∞: ")
    player = Sorcerer(player_name, "–¢–µ—Ö–Ω–∏–∫–∞ –î–µ—Å—è—Ç–∏ –¢–µ–Ω–µ–π (–ü—Ä–æ—Ç–æ—Ç–∏–ø)")
    
    print(f"\n–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –¢–æ–∫–∏–π—Å–∫–∏–π –º–∞–≥–∏—á–µ—Å–∫–∏–π —Ç–µ—Ö–Ω–∏–∫—É–º, {player.name}.")
    print("–í–∞—à–µ –ø–µ—Ä–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –ò–∑–≥–Ω–∞—Ç—å –ø—Ä–æ–∫–ª—è—Ç–∏–µ –Ω–∞ –∑–∞–±—Ä–æ—à–µ–Ω–Ω–æ–π —Å—Ç—Ä–æ–π–∫–µ.")
    
    enemy = CursedSpirit("–ú—É—Ö–∞-–ì–æ–ª–æ–≤–∞", "4-–π —Ä–∞–Ω–≥", hp=20, ac=10)
    
    print(f"\n‚ö†Ô∏è –û–ë–ù–ê–†–£–ñ–ï–ù–û –ü–†–û–ö–õ–Ø–¢–ò–ï: {enemy.name} ({enemy.grade})")
    print(f"HP –≤—Ä–∞–≥–∞: {enemy.hp} | –ö–ª–∞—Å—Å –±—Ä–æ–Ω–∏: {enemy.ac}")
    
    while enemy.hp > 0 and player.hp > 0:
        action = input("\n[A] –ê—Ç–∞–∫–æ–≤–∞—Ç—å  [R] –°–±–µ–∂–∞—Ç—å \n–í–∞—à –≤—ã–±–æ—Ä: ").upper()
        
        if action == "A":
            player.attack(enemy)
            if enemy.hp <= 0:
                print(f"\n‚ú® –ü—Ä–æ–∫–ª—è—Ç–∏–µ {enemy.name} –∏–∑–≥–Ω–∞–Ω–æ!")
                break
                
            # –û—Ç–≤–µ—Ç–Ω—ã–π —É–¥–∞—Ä –ø—Ä–æ–∫–ª—è—Ç–∏—è (—É–ø—Ä–æ—â–µ–Ω–Ω–æ)
            dmg_enemy = random.randint(1, 4)
            player.hp -= dmg_enemy
            print(f"ü©∏ {enemy.name} –∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫—É–µ—Ç! –í—ã –ø–æ–ª—É—á–∏–ª–∏ {dmg_enemy} —É—Ä–æ–Ω–∞. (HP: {player.hp})")
            
        elif action == "R":
            print("–í—ã —Ç–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å—Ç—É–ø–∏–ª–∏.")
            break
        else:
            print("–ù–µ–≤–µ—Ä–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞.")

if __name__ == "__main__":
    start_game()
